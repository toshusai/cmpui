import{j as l}from"./jsx-runtime-DtaoT6pD.js";import{r as v}from"./index-OjgoNOWw.js";import{c as x}from"./createDragHandler-x_VoadIT.js";import{C as b}from"./index-pk5nlV7d.js";import{L as p}from"./index-cYjXm3u-.js";function X({radius:t=32,step:h=12,nobRadius:w=8,...c}){const s=t*2,g=Math.cos(c.value)*(t-2),d=Math.sin(c.value)*(t-2),f=v.useRef(null),u=v.useRef(null),C=x({onDown:o=>{var y;const e=(y=f.current)==null?void 0:y.getBoundingClientRect();if(!e||!u.current)return;u.current.style.cursor="grabbing";const n=u.current.getBoundingClientRect(),a=n.left+n.width/2,i=n.top+n.height/2,r=e.left+e.width/2,m=e.top+e.height/2;return o.stopPropagation(),{centerX:r,centerY:m,offsetX:a-o.clientX,offsetY:i-o.clientY}},onMove:(o,e)=>{var r;if(!e)return;const n=o.clientX-e.centerX+e.offsetX,a=o.clientY-e.centerY+e.offsetY,i=Math.atan2(a,n);(r=c.onChange)==null||r.call(c,i)},onUp:()=>{u.current&&(u.current.style.cursor="grab")}}),M=x({onDown:o=>{var r,m;const e=(r=f.current)==null?void 0:r.getBoundingClientRect();if(!e)return;const n=e.left+e.width/2,a=e.top+e.height/2,i=Math.atan2(o.clientY-a,o.clientX-n);return(m=c.onChange)==null||m.call(c,i),{centerX:n,centerY:a}},onMove:(o,e)=>{var r;if(!e)return;const n=o.clientX-e.centerX,a=o.clientY-e.centerY,i=Math.atan2(a,n);(r=c.onChange)==null||r.call(c,i)}});return l.jsxs("div",{className:"cmpui_angle-input__root",onPointerDown:M,ref:f,style:{width:s,height:s},children:[l.jsx("svg",{width:s,height:s,viewBox:`0 0 ${s} ${s}`,children:l.jsx("circle",{cx:t,cy:t,r:t-1,stroke:"var(--cmpui-border-color)",fill:"none",strokeWidth:1})}),Array.from({length:h}).map((o,e)=>{const n=e*Math.PI/(h/2),a=Math.cos(n)*(t-4),i=Math.sin(n)*(t-4),r=Math.cos(n)*(t-8),m=Math.sin(n)*(t-8);return l.jsx(p,{x1:r+t,y1:m+t,x2:a+t,y2:i+t,strokeWidth:1,stroke:"var(--cmpui-border-color)"},e)}),l.jsx(p,{x1:t,y1:t,x2:g+t,y2:d+t,strokeWidth:1,stroke:"var(--cmpui-primary-color)"}),l.jsx(b,{ref:u,x:g+t,y:d+t,onPointerDown:C,radius:w,className:"cmpui_angle-input__nob"}),l.jsx(b,{x:t,y:t,radius:2,strokeColor:"transparent",fill:"var(--cmpui-primary-color)"})]})}X.__docgenInfo={description:"",methods:[],displayName:"AngleInput",props:{value:{required:!0,tsType:{name:"number"},description:""},nobRadius:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"8",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:""},radius:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"32",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"12",computed:!1}}}};export{X as A};
