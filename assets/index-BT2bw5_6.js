import{j as x}from"./jsx-runtime-DEdD30eg.js";import{r as s}from"./index-D16Yfzz8.js";import{r as i}from"./index-RYns6xqu.js";import{E as d,b as g,w as h}from"./index.es-H_zVnTIh.js";import{F as v}from"./index-XX6COvLX.js";const S=i.memo(y);function y(t){const[o,a]=i.useState({display:"none",position:"fixed",top:"0",left:"0"});i.useEffect(()=>{if(!r.current||!t.trigger.current)return;const{cleanUp:c,open:l}=d(r.current,t.trigger.current,()=>{},e=>{a(f=>{const n={...f};return e.left!==void 0&&e.top!==void 0&&(n.transform=`translate(${e.left}px, ${e.top}px)`),e.maxWidth!==void 0&&(n.maxWidth=`${e.maxWidth}px`),e.maxHeight!==void 0&&(n.maxHeight=`${e.maxHeight}px`,r.current.style.maxHeight=`${e.maxHeight}px`),n.display="",n})},{...t},()=>{var e;(e=t.onClose)==null||e.call(t)});l();const m=t.scrollLock??!0?g():()=>{},u=t.focusTrap?h(r.current):()=>{};return()=>{m(),u(),c()}},[t.trigger.current,t.onClose,t.isOpen]);const r=i.useRef(null);return t.isOpen?s.createPortal(x.jsx(v,{ref:r,className:"cmpui_popover__root",tabIndex:-1,style:o,children:t.children}),document.body):null}export{S as M,y as P};
