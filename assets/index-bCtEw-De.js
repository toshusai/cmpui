import{j as l}from"./jsx-runtime-DEdD30eg.js";import{$ as q}from"./index.es-H_zVnTIh.js";import{r as o,R}from"./index-RYns6xqu.js";import{r as E}from"./index-D16Yfzz8.js";const w="cmpuiTooltip",_=T=>{const r={group:w,groupDelay:200,delay:300,...T},[s,u]=o.useState(!1),[b,y]=o.useState({display:"none",position:"fixed",top:"0",left:"0"}),p=o.useRef(null),a=o.useId(),f=n=>{const d=r.group;if(n===void 0){delete document.body.dataset[d];return}document.body.dataset[d]=n},g=()=>document.body.dataset[r.group??w];o.useEffect(()=>{s||(u(!1),setTimeout(()=>{a===g()&&f(void 0)},r.groupDelay))},[s]);const c=o.useRef(null),v=R.Children.map(r.children,n=>o.isValidElement(n)?R.cloneElement(n,{onPointerEnter:()=>{c.current&&clearTimeout(c.current),g()?(f(a),u(!0)):c.current=window.setTimeout(()=>{u(!0),f(a)},r.delay)},onPointerLeave:()=>{c.current&&clearTimeout(c.current),u(!1)},ref:p,"aria-describedby":a}):n),m=o.useRef(null),e=o.useRef(null);return o.useLayoutEffect(()=>{if(!m.current||!e.current||!p.current)return;const{cleanUp:n,open:d}=q(m.current,p.current,e.current,()=>{},t=>{var x,h;y(S=>{const i={...S};return t.left!==void 0&&t.top!==void 0&&(i.transform=`translate(${t.left}px, ${t.top}px)`),t.maxWidth!==void 0&&(i.maxWidth=`${t.maxWidth}px`),t.maxHeight!==void 0&&(i.maxHeight=`${t.maxHeight}px`),i.display=void 0,i.opacity=void 0,i}),e.current&&(e.current.style.left=((x=t.arrow)==null?void 0:x.x)!=null?`${t.arrow.x}px`:"",e.current.style.top=((h=t.arrow)==null?void 0:h.y)!=null?`${-t.arrow.y}px`:"",t.placement==="bottom"?(e.current.style.transform="rotate(180deg)",e.current.style.transformOrigin="top",e.current.style.top="0",e.current.style.bottom=""):t.placement==="top"?(e.current.style.transform="rotate(0deg)",e.current.style.transformOrigin="bottom",e.current.style.top="",e.current.style.bottom="-5px"):t.placement==="left"?(e.current.style.transform="rotate(-90deg)",e.current.style.transformOrigin="right",e.current.style.top=""):t.placement==="right"&&(e.current.style.transform="rotate(90deg)",e.current.style.transformOrigin="left",e.current.style.top="",e.current.style.left="-2px"))},{placement:r.side??"top"});return(s||r.forceShow)&&(y(t=>({...t,display:void 0,opacity:0})),requestAnimationFrame(()=>{d()})),()=>{n()}},[s,r.side]),l.jsxs(l.Fragment,{children:[v,(s||r.forceShow)&&E.createPortal(l.jsxs("div",{ref:m,className:"cmpui_tooltip__root",role:"tooltip",style:b,id:a,children:[r.content,l.jsx("svg",{ref:e,className:"cmpui_tooltip__arrow",style:{position:"absolute"},width:"10",height:"5",viewBox:"0 0 30 10",preserveAspectRatio:"none",children:l.jsx("polygon",{points:"0,0 30,0 15,10"})})]}),document.body)]})};_.__docgenInfo={description:"",methods:[],displayName:"Tooltip",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},content:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},forceShow:{required:!1,tsType:{name:"boolean"},description:""},side:{required:!1,tsType:{name:"Side"},description:""},delay:{required:!1,tsType:{name:"number"},description:""},group:{required:!1,tsType:{name:"string"},description:""},groupDelay:{required:!1,tsType:{name:"number"},description:""}}};export{_ as T};
