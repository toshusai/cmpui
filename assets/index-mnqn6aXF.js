import{j as D}from"./jsx-runtime-DtaoT6pD.js";import{$ as ee,_ as C}from"./index-Eok78svH.js";import{r as t}from"./index-OjgoNOWw.js";import{r as ue}from"./index-mQqIOHEI.js";import{$ as pe,d as fe,a as A,b as be,e as me,f as j,c as g,g as $e,h as we,i as Te,j as ve}from"./index-wq2dZbDE.js";import{$ as Ee}from"./index-F4RL_6mv.js";import{$ as te}from"./index-Nn85PjCb.js";import{F as xe}from"./index-hC_OXdTA.js";const oe="ToastProvider",[G,ye,ge]=Ee("Toast"),[ne,at]=pe("Toast",[ge]),[Ce,W]=ne(oe),re=e=>{const{__scopeToast:n,label:r="Notification",duration:o=5e3,swipeDirection:i="right",swipeThreshold:u=50,children:p}=e,[f,b]=t.useState(null),[a,x]=t.useState(0),v=t.useRef(!1),O=t.useRef(!1);return t.createElement(G.Provider,{scope:n},t.createElement(Ce,{scope:n,label:r,duration:o,swipeDirection:i,swipeThreshold:u,toastCount:a,viewport:f,onViewportChange:b,onToastAdd:t.useCallback(()=>x(P=>P+1),[]),onToastRemove:t.useCallback(()=>x(P=>P-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:O},p))};re.propTypes={label(e){if(e.label&&typeof e.label=="string"&&!e.label.trim()){const n=`Invalid prop \`label\` supplied to \`${oe}\`. Expected non-empty \`string\`.`;return new Error(n)}return null}};const he="ToastViewport",Re=["F8"],B="toast.viewportPause",z="toast.viewportResume",Pe=t.forwardRef((e,n)=>{const{__scopeToast:r,hotkey:o=Re,label:i="Notifications ({hotkey})",...u}=e,p=W(he,r),f=ye(r),b=t.useRef(null),a=t.useRef(null),x=t.useRef(null),v=t.useRef(null),O=ee(n,v,p.onViewportChange),P=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=p.toastCount>0;t.useEffect(()=>{const c=E=>{var l;o.every($=>E[$]||E.code===$)&&((l=v.current)===null||l===void 0||l.focus())};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[o]),t.useEffect(()=>{const c=b.current,E=v.current;if(_&&c&&E){const l=()=>{if(!p.isClosePausedRef.current){const T=new CustomEvent(B);E.dispatchEvent(T),p.isClosePausedRef.current=!0}},m=()=>{if(p.isClosePausedRef.current){const T=new CustomEvent(z);E.dispatchEvent(T),p.isClosePausedRef.current=!1}},$=T=>{!c.contains(T.relatedTarget)&&m()},w=()=>{c.contains(document.activeElement)||m()};return c.addEventListener("focusin",l),c.addEventListener("focusout",$),c.addEventListener("pointermove",l),c.addEventListener("pointerleave",w),window.addEventListener("blur",l),window.addEventListener("focus",m),()=>{c.removeEventListener("focusin",l),c.removeEventListener("focusout",$),c.removeEventListener("pointermove",l),c.removeEventListener("pointerleave",w),window.removeEventListener("blur",l),window.removeEventListener("focus",m)}}},[_,p.isClosePausedRef]);const d=t.useCallback(({tabbingDirection:c})=>{const l=f().map(m=>{const $=m.ref.current,w=[$,...He($)];return c==="forwards"?w:w.reverse()});return(c==="forwards"?l.reverse():l).flat()},[f]);return t.useEffect(()=>{const c=v.current;if(c){const E=l=>{const m=l.altKey||l.ctrlKey||l.metaKey;if(l.key==="Tab"&&!m){const N=document.activeElement,F=l.shiftKey;if(l.target===c&&F){var w;(w=a.current)===null||w===void 0||w.focus();return}const S=d({tabbingDirection:F?"backwards":"forwards"}),k=S.findIndex(s=>s===N);if(Y(S.slice(k+1)))l.preventDefault();else{var T,h;F?(T=a.current)===null||T===void 0||T.focus():(h=x.current)===null||h===void 0||h.focus()}}};return c.addEventListener("keydown",E),()=>c.removeEventListener("keydown",E)}},[f,d]),t.createElement(fe,{ref:b,role:"region","aria-label":i.replace("{hotkey}",P),tabIndex:-1,style:{pointerEvents:_?void 0:"none"}},_&&t.createElement(Q,{ref:a,onFocusFromOutsideViewport:()=>{const c=d({tabbingDirection:"forwards"});Y(c)}}),t.createElement(G.Slot,{scope:r},t.createElement(A.ol,C({tabIndex:-1},u,{ref:O}))),_&&t.createElement(Q,{ref:x,onFocusFromOutsideViewport:()=>{const c=d({tabbingDirection:"backwards"});Y(c)}}))}),_e="ToastFocusProxy",Q=t.forwardRef((e,n)=>{const{__scopeToast:r,onFocusFromOutsideViewport:o,...i}=e,u=W(_e,r);return t.createElement(te,C({"aria-hidden":!0,tabIndex:0},i,{ref:n,style:{position:"fixed"},onFocus:p=>{var f;const b=p.relatedTarget;!((f=u.viewport)!==null&&f!==void 0&&f.contains(b))&&o()}}))}),H="Toast",Se="toast.swipeStart",De="toast.swipeMove",Fe="toast.swipeCancel",Ie="toast.swipeEnd",Ae=t.forwardRef((e,n)=>{const{forceMount:r,open:o,defaultOpen:i,onOpenChange:u,...p}=e,[f=!0,b]=be({prop:o,defaultProp:i,onChange:u});return t.createElement(me,{present:r||f},t.createElement(se,C({open:f},p,{ref:n,onClose:()=>b(!1),onPause:j(e.onPause),onResume:j(e.onResume),onSwipeStart:g(e.onSwipeStart,a=>{a.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:g(e.onSwipeMove,a=>{const{x,y:v}=a.detail.delta;a.currentTarget.setAttribute("data-swipe","move"),a.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),a.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:g(e.onSwipeCancel,a=>{a.currentTarget.setAttribute("data-swipe","cancel"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),a.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:g(e.onSwipeEnd,a=>{const{x,y:v}=a.detail.delta;a.currentTarget.setAttribute("data-swipe","end"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),a.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),a.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),b(!1)})})))}),[Oe,Ne]=ne(H,{onClose(){}}),se=t.forwardRef((e,n)=>{const{__scopeToast:r,type:o="foreground",duration:i,open:u,onClose:p,onEscapeKeyDown:f,onPause:b,onResume:a,onSwipeStart:x,onSwipeMove:v,onSwipeCancel:O,onSwipeEnd:P,..._}=e,d=W(H,r),[c,E]=t.useState(null),l=ee(n,s=>E(s)),m=t.useRef(null),$=t.useRef(null),w=i||d.duration,T=t.useRef(0),h=t.useRef(w),N=t.useRef(0),{onToastAdd:F,onToastRemove:U}=d,I=j(()=>{var s;(c==null?void 0:c.contains(document.activeElement))&&((s=d.viewport)===null||s===void 0||s.focus()),p()}),S=t.useCallback(s=>{!s||s===1/0||(window.clearTimeout(N.current),T.current=new Date().getTime(),N.current=window.setTimeout(I,s))},[I]);t.useEffect(()=>{const s=d.viewport;if(s){const y=()=>{S(h.current),a==null||a()},R=()=>{const L=new Date().getTime()-T.current;h.current=h.current-L,window.clearTimeout(N.current),b==null||b()};return s.addEventListener(B,R),s.addEventListener(z,y),()=>{s.removeEventListener(B,R),s.removeEventListener(z,y)}}},[d.viewport,w,b,a,S]),t.useEffect(()=>{u&&!d.isClosePausedRef.current&&S(w)},[u,w,d.isClosePausedRef,S]),t.useEffect(()=>(F(),()=>U()),[F,U]);const k=t.useMemo(()=>c?ie(c):null,[c]);return d.viewport?t.createElement(t.Fragment,null,k&&t.createElement(Le,{__scopeToast:r,role:"status","aria-live":o==="foreground"?"assertive":"polite","aria-atomic":!0},k),t.createElement(Oe,{scope:r,onClose:I},ue.createPortal(t.createElement(G.ItemSlot,{scope:r},t.createElement($e,{asChild:!0,onEscapeKeyDown:g(f,()=>{d.isFocusedToastEscapeKeyDownRef.current||I(),d.isFocusedToastEscapeKeyDownRef.current=!1})},t.createElement(A.li,C({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":u?"open":"closed","data-swipe-direction":d.swipeDirection},_,{ref:l,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:g(e.onKeyDown,s=>{s.key==="Escape"&&(f==null||f(s.nativeEvent),s.nativeEvent.defaultPrevented||(d.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:g(e.onPointerDown,s=>{s.button===0&&(m.current={x:s.clientX,y:s.clientY})}),onPointerMove:g(e.onPointerMove,s=>{if(!m.current)return;const y=s.clientX-m.current.x,R=s.clientY-m.current.y,L=!!$.current,M=["left","right"].includes(d.swipeDirection),K=["left","up"].includes(d.swipeDirection)?Math.min:Math.max,de=M?K(0,y):0,le=M?0:K(0,R),X=s.pointerType==="touch"?10:2,V={x:de,y:le},J={originalEvent:s,delta:V};L?($.current=V,q(De,v,J,{discrete:!1})):Z(V,d.swipeDirection,X)?($.current=V,q(Se,x,J,{discrete:!1}),s.target.setPointerCapture(s.pointerId)):(Math.abs(y)>X||Math.abs(R)>X)&&(m.current=null)}),onPointerUp:g(e.onPointerUp,s=>{const y=$.current,R=s.target;if(R.hasPointerCapture(s.pointerId)&&R.releasePointerCapture(s.pointerId),$.current=null,m.current=null,y){const L=s.currentTarget,M={originalEvent:s,delta:y};Z(y,d.swipeDirection,d.swipeThreshold)?q(Ie,P,M,{discrete:!0}):q(Fe,O,M,{discrete:!0}),L.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})))),d.viewport))):null});se.propTypes={type(e){if(e.type&&!["foreground","background"].includes(e.type)){const n=`Invalid prop \`type\` supplied to \`${H}\`. Expected \`foreground | background\`.`;return new Error(n)}return null}};const Le=e=>{const{__scopeToast:n,children:r,...o}=e,i=W(H,n),[u,p]=t.useState(!1),[f,b]=t.useState(!1);return je(()=>p(!0)),t.useEffect(()=>{const a=window.setTimeout(()=>b(!0),1e3);return()=>window.clearTimeout(a)},[]),f?null:t.createElement(we,{asChild:!0},t.createElement(te,o,u&&t.createElement(t.Fragment,null,i.label," ",r)))},Me=t.forwardRef((e,n)=>{const{__scopeToast:r,...o}=e;return t.createElement(A.div,C({},o,{ref:n}))}),ke=t.forwardRef((e,n)=>{const{__scopeToast:r,...o}=e;return t.createElement(A.div,C({},o,{ref:n}))}),Ke="ToastAction",Ve=t.forwardRef((e,n)=>{const{altText:r,...o}=e;return r?t.createElement(ce,{altText:r,asChild:!0},t.createElement(ae,C({},o,{ref:n}))):null});Ve.propTypes={altText(e){return e.altText?null:new Error(`Missing prop \`altText\` expected on \`${Ke}\``)}};const qe="ToastClose",ae=t.forwardRef((e,n)=>{const{__scopeToast:r,...o}=e,i=Ne(qe,r);return t.createElement(ce,{asChild:!0},t.createElement(A.button,C({type:"button"},o,{ref:n,onClick:g(e.onClick,i.onClose)})))}),ce=t.forwardRef((e,n)=>{const{__scopeToast:r,altText:o,...i}=e;return t.createElement(A.div,C({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":o||void 0},i,{ref:n}))});function ie(e){const n=[];return Array.from(e.childNodes).forEach(o=>{if(o.nodeType===o.TEXT_NODE&&o.textContent&&n.push(o.textContent),We(o)){const i=o.ariaHidden||o.hidden||o.style.display==="none",u=o.dataset.radixToastAnnounceExclude==="";if(!i)if(u){const p=o.dataset.radixToastAnnounceAlt;p&&n.push(p)}else n.push(...ie(o))}}),n}function q(e,n,r,{discrete:o}){const i=r.originalEvent.currentTarget,u=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});n&&i.addEventListener(e,n,{once:!0}),o?Te(i,u):i.dispatchEvent(u)}const Z=(e,n,r=0)=>{const o=Math.abs(e.x),i=Math.abs(e.y),u=o>i;return n==="left"||n==="right"?u&&o>r:!u&&i>r};function je(e=()=>{}){const n=j(e);ve(()=>{let r=0,o=0;return r=window.requestAnimationFrame(()=>o=window.requestAnimationFrame(n)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(o)}},[n])}function We(e){return e.nodeType===e.ELEMENT_NODE}function He(e){const n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const i=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||i?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)n.push(r.currentNode);return n}function Y(e){const n=document.activeElement;return e.some(r=>r===n?!0:(r.focus(),document.activeElement!==n))}const Ue=re,Xe=Pe,Ye=Ae,Be=Me,ze=ke,Ge=ae;function Je(e){return D.jsxs(Ue,{swipeDirection:"down",children:[D.jsx(Ye,{duration:3e3,open:e.open,onOpenChange:e.onOpenChange,asChild:!0,children:D.jsxs(xe,{className:"cmpui_toast__root",children:[D.jsx(Be,{}),D.jsx(ze,{children:e.children}),e.close&&D.jsx(Ge,{children:e.close})]})}),D.jsx(Xe,{className:"cmpui_toast__viewport"})]})}Je.__docgenInfo={description:"",methods:[],displayName:"Toast",props:{open:{required:!1,tsType:{name:"boolean"},description:""},defaultOpen:{required:!1,tsType:{name:"boolean"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},side:{required:!1,tsType:{name:"union",raw:'"top" | "bottom" | "left" | "right"',elements:[{name:"literal",value:'"top"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"left"'},{name:"literal",value:'"right"'}]},description:""},avoidCollisions:{required:!1,tsType:{name:"boolean"},description:""},onDismiss:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},sideOffset:{required:!1,tsType:{name:"number"},description:""},alignOffset:{required:!1,tsType:{name:"number"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},close:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{Je as T};
