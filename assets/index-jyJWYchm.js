import{j as i}from"./jsx-runtime-DEdD30eg.js";import{r as h}from"./index-RYns6xqu.js";import{d as v,L as u,a as x,A as c,R as f,D as m,k as M,S as P,T as R,O as D,c as C}from"./index.es-H_zVnTIh.js";import{C as _}from"./index-Cw-4VH1H.js";import{c as j}from"./createDragHandler-DDNYS428.js";function z(e){const g=new DOMMatrix().translate(e.position.x,e.position.y).rotate(0,0,v(e.rotation)).scale(e.scale.x,e.scale.y).translate(-e.origin.x,-e.origin.y),y=new DOMMatrix().scale(1/e.scale.x,1/e.scale.y),l=u(y),d=h.useRef(null);return i.jsxs("div",{className:"cmpui_rect-gizmo",style:{transform:u(g),width:e.width,height:e.height},...e.rootProps,children:[i.jsx("div",{onPointerDown:j({onMove(a,n,t){e.onChange({...e,position:{x:e.position.x+t.dx,y:e.position.y+t.dy}})}})}),i.jsx("div",{className:"cmpui_rect-gizmo-origin",style:{left:x(e.origin.x),top:x(e.origin.y),transform:l},ref:d,children:i.jsx("div",{})}),c.map(([a,n],t)=>i.jsx("div",{style:f(a,n,t,8,e.scale),className:`cmpui_rect-gizmo-edge step-${m(e.rotation,t,0)}`,"data-pos":"lbrt"[t],onPointerDown:o=>M(e,a,n,(r,s)=>{e.onChange({...e,scale:{x:r,y:s}})})(o.nativeEvent)},t)),c.map(([a,n],t)=>i.jsx("div",{style:P(a,n,e.scale),className:`cmpui_rect-gizmo-corner step-${m(e.rotation,t,-(Math.PI/4)+(e.scale.x<0?Math.PI/2:0)+(e.scale.y<0?Math.PI/2:0))}`,"data-pos":R(a,n),onPointerDown:o=>D(e.rotation,r=>e.onChange({...e,rotation:r}),d.current)(o.nativeEvent)},t)),c.map(([a,n],t)=>i.jsx(_,{x:a*e.width,y:n*e.height,radius:4,fill:"var(--cmpui-primary-color)",style:{transform:l},className:`cmpui_rect-gizmo-corner step-${m(e.rotation,t,Math.PI/4+(e.scale.x<0?Math.PI/2:0)+(e.scale.y<0?Math.PI/2:0))}`,onPointerDown:o=>C(e,a,n,(r,s)=>{e.onChange({...e,scale:{x:r,y:s}})})(o.nativeEvent)},t))]})}z.__docgenInfo={description:"",methods:[],displayName:"RectGizmo",props:{rootProps:{required:!1,tsType:{name:"ReactHTMLAttributes",raw:"React.HTMLAttributes<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: CoreRectGizmoProps) => void",signature:{arguments:[{type:{name:"CoreRectGizmoProps"},name:"props"}],return:{name:"void"}}},description:""}}};export{z as R};
