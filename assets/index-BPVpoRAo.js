import{j as m}from"./jsx-runtime-Cw0GR0a5.js";import{r as u}from"./index-CTjT7uj6.js";import{m as g}from"./mergeRefs-D1znqPHH.js";import{c as R}from"./classNames-CN4lTu6a.js";function z(){const[e,t]=u.useState(),r=u.useRef(null);return u.useEffect(()=>{if(!r.current)return;const n=new ResizeObserver(a=>{for(const s of a){if(s.contentRect.width===(e==null?void 0:e.width)&&s.contentRect.height===(e==null?void 0:e.height))return;t(s.contentRect)}});return n.observe(r.current),()=>{n.disconnect()}},[e]),[e,r]}function x(e){return m.jsxs("div",{className:"cmpui_ruler-text__root","data-orientation":e.orientation,style:{left:e.orientation==="horizontal"?`${e.left}px`:void 0,top:e.orientation==="horizontal"?void 0:`${e.left}px`},children:[m.jsx("div",{className:"cmpui_ruler-text__line","data-orientation":e.orientation}),m.jsx("div",{className:"cmpui_ruler-text__text","data-orientation":e.orientation,children:e.time})]})}x.__docgenInfo={description:"",methods:[],displayName:"TimeText",props:{time:{required:!0,tsType:{name:"string"},description:""},left:{required:!0,tsType:{name:"number"},description:""},orientation:{required:!1,tsType:{name:"union",raw:'"horizontal" | "vertical"',elements:[{name:"literal",value:'"horizontal"'},{name:"literal",value:'"vertical"'}]},description:""}}};function N(e){let t=e.toFixed(2);return t.endsWith(".00")?t=t.slice(0,-3):t.endsWith("0")&&(t=t.slice(0,-1)),t==="-0"&&(t="0"),t}const v=[1,5,10,50,100,500,1e3,5e3,1e4];function y(e,t,r,n,a=0){const s=r.findIndex(d=>d*e>t),c=r[s]*e,i=Math.ceil(n/c),p=a*e%c;return Number.isNaN(i)?[]:[...Array(i+1).keys()].map(d=>d*c-p)}const w=u.memo(u.forwardRef(({offset:e=0,pxPerUnit:t=1,renderText:r,steps:n,minInterval:a=32,className:s,style:c,orientation:i="horizontal",...p},d)=>{const[l,_]=z(),f=(i==="horizontal"?l==null?void 0:l.width:l==null?void 0:l.height)??0,b=u.useMemo(()=>y(t,a,n??v,f,e),[t,a,n,f,e]),T=u.useMemo(()=>y(t,a/4,n??v,f,e),[t,a,n,f,e]);return m.jsxs("div",{className:R("cmpui_ruler__root",s),"data-orientation":i,ref:g(_,d),style:{...c},...p,children:[T.map(o=>m.jsx("div",{"data-orientation":i,className:"cmpui_ruler__point",style:{top:i==="horizontal"?void 0:`${o}px`,left:i==="horizontal"?`${o}px`:void 0}},o)),b.map(o=>{const h=o/t+e;return m.jsx(x,{time:r?r(h):N(h),left:o,orientation:i},o)})]})}));w.__docgenInfo={description:"",methods:[],displayName:"Ruler",props:{offset:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},pxPerUnit:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},height:{required:!1,tsType:{name:"number"},description:""},steps:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:""},renderText:{required:!1,tsType:{name:"signature",type:"function",raw:"(time: number) => string",signature:{arguments:[{type:{name:"number"},name:"time"}],return:{name:"string"}}},description:""},minInterval:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"32",computed:!1}},orientation:{required:!1,tsType:{name:"union",raw:'"horizontal" | "vertical"',elements:[{name:"literal",value:'"horizontal"'},{name:"literal",value:'"vertical"'}]},description:"",defaultValue:{value:'"horizontal"',computed:!1}}}};export{w as R};
