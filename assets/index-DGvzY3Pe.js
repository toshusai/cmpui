import{j as u}from"./jsx-runtime-Cw0GR0a5.js";import{r as s}from"./index-CTjT7uj6.js";import{c as K,u as M,P as W,b as g,e as H,D as z,j as J,d as Q,g as Z}from"./index-DVQbr_LR.js";import{c as S,A as ee,C as te,a as oe,u as ne,R as re}from"./index-DU9HO3_w.js";import{R as se}from"./index-91UZ0hjQ.js";var[_,Le]=K("Tooltip",[S]),O=S(),q="TooltipProvider",ae=700,D="tooltip.open",[ie,L]=_(q),le=e=>{const{__scopeTooltip:o,delayDuration:t=ae,skipDelayDuration:n=300,disableHoverableContent:r=!1,children:i}=e,[c,f]=s.useState(!0),a=s.useRef(!1),d=s.useRef(0);return s.useEffect(()=>{const l=d.current;return()=>window.clearTimeout(l)},[]),u.jsx(ie,{scope:o,isOpenDelayed:c,delayDuration:t,onOpen:s.useCallback(()=>{window.clearTimeout(d.current),f(!1)},[]),onClose:s.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>f(!0),n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:s.useCallback(l=>{a.current=l},[]),disableHoverableContent:r,children:i})};le.displayName=q;var j="Tooltip",[ce,E]=_(j),G=e=>{const{__scopeTooltip:o,children:t,open:n,defaultOpen:r=!1,onOpenChange:i,disableHoverableContent:c,delayDuration:f}=e,a=L(j,e.__scopeTooltip),d=O(o),[l,p]=s.useState(null),m=ne(),v=s.useRef(0),h=c??a.disableHoverableContent,T=f??a.delayDuration,x=s.useRef(!1),[C=!1,y]=Q({prop:n,defaultProp:r,onChange:I=>{I?(a.onOpen(),document.dispatchEvent(new CustomEvent(D))):a.onClose(),i==null||i(I)}}),w=s.useMemo(()=>C?x.current?"delayed-open":"instant-open":"closed",[C]),R=s.useCallback(()=>{window.clearTimeout(v.current),x.current=!1,y(!0)},[y]),P=s.useCallback(()=>{window.clearTimeout(v.current),y(!1)},[y]),k=s.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{x.current=!0,y(!0)},T)},[T,y]);return s.useEffect(()=>()=>window.clearTimeout(v.current),[]),u.jsx(re,{...d,children:u.jsx(ce,{scope:o,contentId:m,open:C,stateAttribute:w,trigger:l,onTriggerChange:p,onTriggerEnter:s.useCallback(()=>{a.isOpenDelayed?k():R()},[a.isOpenDelayed,k,R]),onTriggerLeave:s.useCallback(()=>{h?P():window.clearTimeout(v.current)},[P,h]),onOpen:R,onClose:P,disableHoverableContent:h,children:t})})};G.displayName=j;var A="TooltipTrigger",F=s.forwardRef((e,o)=>{const{__scopeTooltip:t,...n}=e,r=E(A,t),i=L(A,t),c=O(t),f=s.useRef(null),a=M(o,f,r.onTriggerChange),d=s.useRef(!1),l=s.useRef(!1),p=s.useCallback(()=>d.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),u.jsx(ee,{asChild:!0,...c,children:u.jsx(W.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...n,ref:a,onPointerMove:g(e.onPointerMove,m=>{m.pointerType!=="touch"&&!l.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),l.current=!0)}),onPointerLeave:g(e.onPointerLeave,()=>{r.onTriggerLeave(),l.current=!1}),onPointerDown:g(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:g(e.onFocus,()=>{d.current||r.onOpen()}),onBlur:g(e.onBlur,r.onClose),onClick:g(e.onClick,r.onClose)})})});F.displayName=A;var N="TooltipPortal",[ue,de]=_(N,{forceMount:void 0}),B=e=>{const{__scopeTooltip:o,forceMount:t,children:n,container:r}=e,i=E(N,o);return u.jsx(ue,{scope:o,forceMount:t,children:u.jsx(H,{present:t||i.open,children:u.jsx(Z,{asChild:!0,container:r,children:n})})})};B.displayName=N;var b="TooltipContent",U=s.forwardRef((e,o)=>{const t=de(b,e.__scopeTooltip),{forceMount:n=t.forceMount,side:r="top",...i}=e,c=E(b,e.__scopeTooltip);return u.jsx(H,{present:n||c.open,children:c.disableHoverableContent?u.jsx(V,{side:r,...i,ref:o}):u.jsx(pe,{side:r,...i,ref:o})})}),pe=s.forwardRef((e,o)=>{const t=E(b,e.__scopeTooltip),n=L(b,e.__scopeTooltip),r=s.useRef(null),i=M(o,r),[c,f]=s.useState(null),{trigger:a,onClose:d}=t,l=r.current,{onPointerInTransitChange:p}=n,m=s.useCallback(()=>{f(null),p(!1)},[p]),v=s.useCallback((h,T)=>{const x=h.currentTarget,C={x:h.clientX,y:h.clientY},y=he(C,x.getBoundingClientRect()),w=me(C,y),R=xe(T.getBoundingClientRect()),P=ye([...w,...R]);f(P),p(!0)},[p]);return s.useEffect(()=>()=>m(),[m]),s.useEffect(()=>{if(a&&l){const h=x=>v(x,l),T=x=>v(x,a);return a.addEventListener("pointerleave",h),l.addEventListener("pointerleave",T),()=>{a.removeEventListener("pointerleave",h),l.removeEventListener("pointerleave",T)}}},[a,l,v,m]),s.useEffect(()=>{if(c){const h=T=>{const x=T.target,C={x:T.clientX,y:T.clientY},y=(a==null?void 0:a.contains(x))||(l==null?void 0:l.contains(x)),w=!Te(C,c);y?m():w&&(m(),d())};return document.addEventListener("pointermove",h),()=>document.removeEventListener("pointermove",h)}},[a,l,c,d,m]),u.jsx(V,{...e,ref:i})}),[fe,ve]=_(j,{isInside:!1}),V=s.forwardRef((e,o)=>{const{__scopeTooltip:t,children:n,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:c,...f}=e,a=E(b,t),d=O(t),{onClose:l}=a;return s.useEffect(()=>(document.addEventListener(D,l),()=>document.removeEventListener(D,l)),[l]),s.useEffect(()=>{if(a.trigger){const p=m=>{const v=m.target;v!=null&&v.contains(a.trigger)&&l()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[a.trigger,l]),u.jsx(z,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:p=>p.preventDefault(),onDismiss:l,children:u.jsxs(te,{"data-state":a.stateAttribute,...d,...f,ref:o,style:{...f.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(J,{children:n}),u.jsx(fe,{scope:t,isInside:!0,children:u.jsx(se,{id:a.contentId,role:"tooltip",children:r||n})})]})})});U.displayName=b;var Y="TooltipArrow",X=s.forwardRef((e,o)=>{const{__scopeTooltip:t,...n}=e,r=O(t);return ve(Y,t).isInside?null:u.jsx(oe,{...r,...n,ref:o})});X.displayName=Y;function he(e,o){const t=Math.abs(o.top-e.y),n=Math.abs(o.bottom-e.y),r=Math.abs(o.right-e.x),i=Math.abs(o.left-e.x);switch(Math.min(t,n,r,i)){case i:return"left";case r:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function me(e,o,t=5){const n=[];switch(o){case"top":n.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":n.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":n.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":n.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t});break}return n}function xe(e){const{top:o,right:t,bottom:n,left:r}=e;return[{x:r,y:o},{x:t,y:o},{x:t,y:n},{x:r,y:n}]}function Te(e,o){const{x:t,y:n}=e;let r=!1;for(let i=0,c=o.length-1;i<o.length;c=i++){const f=o[i].x,a=o[i].y,d=o[c].x,l=o[c].y;a>n!=l>n&&t<(d-f)*(n-a)/(l-a)+f&&(r=!r)}return r}function ye(e){const o=e.slice();return o.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),Ce(o)}function Ce(e){if(e.length<=1)return e.slice();const o=[];for(let n=0;n<e.length;n++){const r=e[n];for(;o.length>=2;){const i=o[o.length-1],c=o[o.length-2];if((i.x-c.x)*(r.y-c.y)>=(i.y-c.y)*(r.x-c.x))o.pop();else break}o.push(r)}o.pop();const t=[];for(let n=e.length-1;n>=0;n--){const r=e[n];for(;t.length>=2;){const i=t[t.length-1],c=t[t.length-2];if((i.x-c.x)*(r.y-c.y)>=(i.y-c.y)*(r.x-c.x))t.pop();else break}t.push(r)}return t.pop(),o.length===1&&t.length===1&&o[0].x===t[0].x&&o[0].y===t[0].y?o:o.concat(t)}var ge=G,be=F,we=B,Re=U,Pe=X;const Ee=e=>u.jsxs(ge,{delayDuration:500,defaultOpen:e.defaultOpen,onOpenChange:e.onOpenChange,open:e.open,children:[u.jsx(be,{asChild:!0,children:e.children}),u.jsx(we,{container:e.container,children:u.jsx(Re,{side:e.side,asChild:!0,sideOffset:e.sideOffset,alignOffset:e.alignOffset,avoidCollisions:e.avoidCollisions,children:u.jsxs($,{children:[e.content,u.jsx(Pe,{className:"cmpui_tooltip__arrow"})]})})})]}),$=s.forwardRef((e,o)=>u.jsx("div",{ref:o,className:"cmpui_tooltip__root",children:e.children}));Ee.__docgenInfo={description:"",methods:[],displayName:"Tooltip",props:{alignOffset:{required:!1,tsType:{name:"number"},description:""},avoidCollisions:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},container:{required:!1,tsType:{name:"HTMLElement"},description:""},content:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},defaultOpen:{required:!1,tsType:{name:"boolean"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},side:{required:!1,tsType:{name:"union",raw:'"top" | "bottom" | "left" | "right"',elements:[{name:"literal",value:'"top"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"left"'},{name:"literal",value:'"right"'}]},description:""},sideOffset:{required:!1,tsType:{name:"number"},description:""}}};$.__docgenInfo={description:"",methods:[],displayName:"TooltipPresenter"};export{Ee as T,le as a,$ as b};
