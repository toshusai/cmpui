import{j as i}from"./jsx-runtime-Cw0GR0a5.js";import{F as Y}from"./index-BVhRoD2p.js";import{L as W}from"./index-DCmEyuZs.js";import{r as o}from"./index-CTjT7uj6.js";import{c as z,P as K,b as w,f as J}from"./index-D3iKhckW.js";import{c as q,A as Q,C as Z,G as ee,L as ne,I as te,a as re,R as ae,b as oe,d as ie,S as se,e as ue,f as de,g as ce,h as le,P as me}from"./index-kTCvGdNn.js";import{r as pe}from"./index-CYM-y3Gt.js";function ge({onDown:e,onMove:t,onUp:n}){return r=>{if(r.buttons===2)return;const d=e==null?void 0:e(r);let s;const u=m=>{s=t==null?void 0:t(m,d,s)},l=m=>{window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",l),n==null||n(m,d,s)};window.addEventListener("pointermove",u),window.addEventListener("pointerup",l)}}var P="ContextMenu",[fe,tn]=z(P,[q]),g=q(),[he,A]=fe(P),k=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:a,dir:r,modal:d=!0}=e,[s,u]=o.useState(!1),l=g(t),m=J(a),c=o.useCallback(h=>{u(h),m(h)},[m]);return i.jsx(he,{scope:t,open:s,onOpenChange:c,modal:d,children:i.jsx(le,{...l,dir:r,open:s,onOpenChange:c,modal:d,children:n})})};k.displayName=P;var L="ContextMenuTrigger",D=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:a=!1,...r}=e,d=A(L,n),s=g(n),u=o.useRef({x:0,y:0}),l=o.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...u.current})}),m=o.useRef(0),c=o.useCallback(()=>window.clearTimeout(m.current),[]),h=f=>{u.current={x:f.clientX,y:f.clientY},d.onOpenChange(!0)};return o.useEffect(()=>c,[c]),o.useEffect(()=>void(a&&c()),[a,c]),i.jsxs(i.Fragment,{children:[i.jsx(Q,{...s,virtualRef:l}),i.jsx(K.span,{"data-state":d.open?"open":"closed","data-disabled":a?"":void 0,...r,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:a?e.onContextMenu:w(e.onContextMenu,f=>{c(),h(f),f.preventDefault()}),onPointerDown:a?e.onPointerDown:w(e.onPointerDown,_(f=>{c(),m.current=window.setTimeout(()=>h(f),700)})),onPointerMove:a?e.onPointerMove:w(e.onPointerMove,_(c)),onPointerCancel:a?e.onPointerCancel:w(e.onPointerCancel,_(c)),onPointerUp:a?e.onPointerUp:w(e.onPointerUp,_(c))})]})});D.displayName=L;var ye="ContextMenuPortal",U=e=>{const{__scopeContextMenu:t,...n}=e,a=g(t);return i.jsx(me,{...a,...n})};U.displayName=ye;var H="ContextMenuContent",B=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=A(H,n),d=g(n),s=o.useRef(!1);return i.jsx(Z,{...d,...a,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:u=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,u),!u.defaultPrevented&&s.current&&u.preventDefault(),s.current=!1},onInteractOutside:u=>{var l;(l=e.onInteractOutside)==null||l.call(e,u),!u.defaultPrevented&&!r.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});B.displayName=H;var xe="ContextMenuGroup",ve=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=g(n);return i.jsx(ee,{...r,...a,ref:t})});ve.displayName=xe;var Ce="ContextMenuLabel",Te=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=g(n);return i.jsx(ne,{...r,...a,ref:t})});Te.displayName=Ce;var Ie="ContextMenuItem",G=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=g(n);return i.jsx(te,{...r,...a,ref:t})});G.displayName=Ie;var we="ContextMenuCheckboxItem",Re=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=g(n);return i.jsx(re,{...r,...a,ref:t})});Re.displayName=we;var Me="ContextMenuRadioGroup",be=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=g(n);return i.jsx(ae,{...r,...a,ref:t})});be.displayName=Me;var _e="ContextMenuRadioItem",Oe=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=g(n);return i.jsx(oe,{...r,...a,ref:t})});Oe.displayName=_e;var Pe="ContextMenuItemIndicator",Ne=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=g(n);return i.jsx(ie,{...r,...a,ref:t})});Ne.displayName=Pe;var Ee="ContextMenuSeparator",$=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=g(n);return i.jsx(se,{...r,...a,ref:t})});$.displayName=Ee;var Se="ContextMenuArrow",je=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=g(n);return i.jsx(ue,{...r,...a,ref:t})});je.displayName=Se;var qe="ContextMenuSubTrigger",Ae=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=g(n);return i.jsx(de,{...r,...a,ref:t})});Ae.displayName=qe;var ke="ContextMenuSubContent",Le=o.forwardRef((e,t)=>{const{__scopeContextMenu:n,...a}=e,r=g(n);return i.jsx(ce,{...r,...a,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Le.displayName=ke;function _(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var De=k,Ue=D,He=U,Be=B,Ge=G,$e=$;function Fe(e){return i.jsxs(De,{onOpenChange:e.onOpenChange,children:[i.jsx(Ue,{asChild:!0,children:e.children}),i.jsx(He,{children:i.jsx(Be,{asChild:!0,children:i.jsx(Y,{children:e.content})})})]})}Fe.__docgenInfo={description:"",methods:[],displayName:"ContextMenu",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},content:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};function Ve({children:e,...t}){return i.jsx(Ge,{...t,asChild:!0,children:i.jsx(W,{size:"S",rounded:!0,children:e})})}Ve.__docgenInfo={description:"",methods:[],displayName:"ContextMenuItem"};function Xe(){return i.jsx($e,{className:"context-menu-separator"})}Xe.__docgenInfo={description:"",methods:[],displayName:"ContextMenuSeparator"};const F=o.createContext({treeId:null,setIsDragging:()=>{}}),V=o.createContext({map:new Map});var I=(e=>(e[e.Before=0]="Before",e[e.After=1]="After",e[e.Child=2]="Child",e))(I||{});function X(e,t){if(e.id===t)return!0;if(e.children){for(const n of e.children)if(X(n,t))return!0}return!1}function j(e,t,n){const a=e.currentTarget;if(!(a instanceof HTMLElement))return null;const r=a.getBoundingClientRect(),d=e.clientY-r.top,s=d<r.height/3?I.Before:d>r.height*2/3?I.After:I.Child;return X(t,n.id)||n.children===void 0&&s===I.Child?null:s}function Ye(e,t,n){const[a,r]=o.useState(!1),[d,s]=o.useState(0),[u,l]=o.useState(0);return{handlePointerDown:o.useMemo(()=>ge({onMove:(c,h,f)=>{if(c.pointerType!=="touch")return c.preventDefault(),f?(r(!0),s(c.pageX),l(c.pageY),!0):(e(),!0)},onUp:()=>{r(!1)}}),[e,t]),shadow:a&&pe.createPortal(i.jsx("div",{style:{position:"absolute",pointerEvents:"none",display:"flex",left:`${d}px`,top:`${u}px`,opacity:"0.5",boxSizing:"border-box"},children:n}),document.body)}}function N({depth:e=0,updateIndicator:t=j,...n}){var M;const a=n.render,{treeId:r,setIsDragging:d}=o.useContext(F),s=o.useRef(null),{map:u}=o.useContext(V),[l,m]=o.useState(!0),{handlePointerDown:c,shadow:h}=Ye(()=>{d(n.item.id)},()=>{},(M=n.shadowRender)==null?void 0:M.call(n,{item:n.item,depth:e,open:!1,onOpenChange:()=>{}})),f=o.useCallback(v=>{var p,C;if(!r)return;const y=u.get(r);if(!y)return;const x=t(v,y.item,n.item);(p=n.onOrderChange)==null||p.call(n,r,n.item.id,x),d(null),s.current&&((C=n.onUpdateIndicator)==null||C.call(n,s.current,null,e))},[e,u,n.item,n.onOrderChange,n.onUpdateIndicator,d,r,t]),O=o.useCallback(v=>{var p;if(!r)return;const y=u.get(r);if(!y)return;const x=j(v,y.item,n.item);s.current&&((p=n.onUpdateIndicator)==null||p.call(n,s.current,x,e))},[e,u,n.item,n.onUpdateIndicator,r]),R=o.useMemo(()=>()=>{n.onItemSelect(n.item)},[n.onItemSelect,n.item]);return i.jsxs(i.Fragment,{children:[i.jsxs("li",{onPointerUp:f,onPointerDown:c,onPointerMove:O,ref:s,className:"cmpui_tree-view__item",onClick:R,children:[i.jsx(a,{item:n.item,onOpenChange:m,open:l,depth:e}),h]}),n.item.children&&l&&i.jsx("li",{className:"cmpui_tree-view__item-dir",children:i.jsx("ol",{className:"cmpui_tree-view__item-dir-ol",children:n.item.children.map(v=>i.jsx(N,{updateIndicator:t,render:n.render,shadowRender:n.shadowRender,onOrderChange:n.onOrderChange,onUpdateIndicator:n.onUpdateIndicator,depth:e+1,item:v,isSelected:n.isSelected,onItemSelect:n.onItemSelect},v.id))})})]})}N.__docgenInfo={description:"",methods:[],displayName:"TreeViewItem",props:{depth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},isSelected:{required:!0,tsType:{name:"boolean"},description:""},item:{required:!0,tsType:{name:"T"},description:""},onItemSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(item: T) => void",signature:{arguments:[{type:{name:"T"},name:"item"}],return:{name:"void"}}},description:""},onOrderChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(src: string, dist: string, type: OrderType | null) => void",signature:{arguments:[{type:{name:"string"},name:"src"},{type:{name:"string"},name:"dist"},{type:{name:"union",raw:"OrderType | null",elements:[{name:"OrderType"},{name:"null"}]},name:"type"}],return:{name:"void"}}},description:""},onUpdateIndicator:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  el: HTMLLIElement,
  type: OrderType | null,
  depth: number,
) => void`,signature:{arguments:[{type:{name:"HTMLLIElement"},name:"el"},{type:{name:"union",raw:"OrderType | null",elements:[{name:"OrderType"},{name:"null"}]},name:"type"},{type:{name:"number"},name:"depth"}],return:{name:"void"}}},description:""},render:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: RenderProps<T>) => React.ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  depth: number;
  item: T;
  onOpenChange: (isOpen: boolean) => void;
  open: boolean;
}`,signature:{properties:[{key:"depth",value:{name:"number",required:!0}},{key:"item",value:{name:"T",required:!0}},{key:"onOpenChange",value:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}},required:!0}},{key:"open",value:{name:"boolean",required:!0}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},shadowRender:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: RenderProps<T>) => React.ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  depth: number;
  item: T;
  onOpenChange: (isOpen: boolean) => void;
  open: boolean;
}`,signature:{properties:[{key:"depth",value:{name:"number",required:!0}},{key:"item",value:{name:"T",required:!0}},{key:"onOpenChange",value:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}},required:!0}},{key:"open",value:{name:"boolean",required:!0}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},updateIndicator:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  e: React.PointerEvent<HTMLLIElement>,
  srcItem: ITree,
  distItem: ITree,
) => OrderType | null`,signature:{arguments:[{type:{name:"ReactPointerEvent",raw:"React.PointerEvent<HTMLLIElement>",elements:[{name:"HTMLLIElement"}]},name:"e"},{type:{name:"signature",type:"object",raw:`{
  id: string;
  children?: ITree[];
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"children",value:{name:"Array",elements:[{name:"ITree"}],raw:"ITree[]",required:!1}}]}},name:"srcItem"},{type:{name:"signature",type:"object",raw:`{
  id: string;
  children?: ITree[];
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"children",value:{name:"Array",elements:[{name:"ITree"}],raw:"ITree[]",required:!1}}]}},name:"distItem"}],return:{name:"union",raw:"OrderType | null",elements:[{name:"OrderType"},{name:"null"}]}}},description:"",defaultValue:{value:`function defaultIndicatorUpdate(
  e: React.PointerEvent<HTMLLIElement>,
  srcItem: ITree,
  distItem: ITree,
): OrderType | null {
  const el = e.currentTarget;
  if (!(el instanceof HTMLElement)) return null;
  const rect = el.getBoundingClientRect();
  const y = e.clientY - rect.top;

  const orderType =
    y < rect.height / 3
      ? OrderType.Before
      : y > (rect.height * 2) / 3
        ? OrderType.After
        : OrderType.Child;

  if (inChildren(srcItem, distItem.id)) {
    return null;
  }

  if (distItem.children === undefined && orderType === OrderType.Child) {
    return null;
  }

  return orderType;
}`,computed:!1}}}};function We(e){const[t,n]=o.useState(null),[a,r]=o.useState(null),d=o.useMemo(()=>{const y=new Map,x=(p,C)=>{var T;y.set(p.id,{item:p,parentId:C}),(T=p.children)==null||T.forEach(b=>x(b,p.id))};return e.items.forEach(p=>x(p)),y},[e.items]),[s,u]=o.useState(0),[l,m]=o.useState(0),[c,h]=o.useState(0),[f,O]=o.useState(0),[R,M]=o.useState(null),v=o.useRef(null);return i.jsx(V.Provider,{value:{map:d},children:i.jsx(F.Provider,{value:{treeId:a,setIsDragging:r},children:i.jsxs("div",{className:"cmpui_tree-view__root",ref:v,children:[i.jsx("ol",{className:"cmpui_tree-view__ol",children:e.items.map(y=>i.jsx(N,{item:y,isSelected:t===y,onItemSelect:x=>{n(x)},shadowRender:e.shadowRender,render:e.render,onOrderChange:e.onOrderChange,updateIndicator:e.updateIndicator,onUpdateIndicator:(x,p)=>{var S;const C=(S=v.current)==null?void 0:S.getBoundingClientRect();if(!C)return;const T=x.getBoundingClientRect(),b=x.firstElementChild;if(!b)return;const E=parseInt(getComputedStyle(b).paddingLeft);u(E),O(T.width-E),p===I.Child?(m(T.top-C.top),h(T.height)):p===I.Before?(m(T.top-C.top),h(4)):(m(T.top-C.top+T.height-4),h(4)),M(p)}},y.id))}),R!==null&&i.jsx("div",{className:"cmpui_tree-view__drag-indicator","data-order":R,style:{left:s,top:l,width:f,height:c}})]})})})}We.__docgenInfo={description:"",methods:[],displayName:"TreeView",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:""},onOrderChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(src: string, dist: string, type: OrderType | null) => void",signature:{arguments:[{type:{name:"string"},name:"src"},{type:{name:"string"},name:"dist"},{type:{name:"union",raw:"OrderType | null",elements:[{name:"OrderType"},{name:"null"}]},name:"type"}],return:{name:"void"}}},description:""},render:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: RenderProps<T>) => React.ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  depth: number;
  item: T;
  onOpenChange: (isOpen: boolean) => void;
  open: boolean;
}`,signature:{properties:[{key:"depth",value:{name:"number",required:!0}},{key:"item",value:{name:"T",required:!0}},{key:"onOpenChange",value:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}},required:!0}},{key:"open",value:{name:"boolean",required:!0}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},shadowRender:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: RenderProps<T>) => React.ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  depth: number;
  item: T;
  onOpenChange: (isOpen: boolean) => void;
  open: boolean;
}`,signature:{properties:[{key:"depth",value:{name:"number",required:!0}},{key:"item",value:{name:"T",required:!0}},{key:"onOpenChange",value:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}},required:!0}},{key:"open",value:{name:"boolean",required:!0}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},updateIndicator:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  e: React.PointerEvent<HTMLLIElement>,
  srcItem: ITree,
  distItem: ITree,
) => OrderType | null`,signature:{arguments:[{type:{name:"ReactPointerEvent",raw:"React.PointerEvent<HTMLLIElement>",elements:[{name:"HTMLLIElement"}]},name:"e"},{type:{name:"signature",type:"object",raw:`{
  id: string;
  children?: ITree[];
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"children",value:{name:"Array",elements:[{name:"ITree"}],raw:"ITree[]",required:!1}}]}},name:"srcItem"},{type:{name:"signature",type:"object",raw:`{
  id: string;
  children?: ITree[];
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"children",value:{name:"Array",elements:[{name:"ITree"}],raw:"ITree[]",required:!1}}]}},name:"distItem"}],return:{name:"union",raw:"OrderType | null",elements:[{name:"OrderType"},{name:"null"}]}}},description:""}}};export{Fe as C,I as O,We as T,Ve as a,Xe as b,ge as c,X as i};
